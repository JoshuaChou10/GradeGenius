<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ course.name }} - Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/details.css') }}">

</head>

<body>
    {% if time_left == 0 %}
    <div style="background-color: #ff4d4d; color: white; text-align: center; padding: 10px;">
        Course is finished!
    </div>
    {% endif %}

    <header>
        <a class="home-btn" href="{{ url_for('index') }}">Home</a>
        <div>
            <h1>{{ course.name }}-{{course.code}}</h1>
            <div class="grade">
                {% if course.grade==0%}
                    No grade yet
                {% else %}
                    {{ course['grade']|round(2) }}%
                {% endif %}
            </div>
        </div>
    </header>

    <main>
        <section class="course-details">
            <a href="{{ url_for('add_assessment', course_id=course.id) }}" class="add-assessment-btn">Add Assessment</a>
            <h2>Course Information</h2>
            <p><strong>Code:</strong> {{ course.code }}</p>
            <p><strong>Description:</strong> {{ course.description }}</p>
            <p><strong>Days left for completion:</strong> {{ time_left }}</p>

            <!-- Displaying the list of assessments -->
            <h3>Assessments</h3>
            <p><strong>Starting Score:</strong> {{ (course.starting_marks * course.starting_grade) / 100 }} / {{ course.starting_marks }}</p>
    
            {% if course.assessments|length > 0 %}
                <table border="1" cellpadding="5" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Mark</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for assessment in course.assessments %}
                            <tr>
                                <td>{{ assessment.name }}</td>
                                <td>{{ assessment.earned }} / {{ assessment.total }}</td>
                                <td>{{ assessment.date.strftime('%B %d, %Y') }}</td>
                            </tr>
                        {% endfor %}
                        <!-- Total row -->
                        <tr style="font-weight:bold;">
                            <td>Total</td>
                            <td>{{ (course.total_marks * course.grade) / 100 }} / {{ course.total_marks }}</td>
                            <td></td>  <!-- Empty cell in the Date column -->
                        </tr>
                    </tbody>
                </table>
            {% else %}
                <p>No assessments yet!</p>
            {% endif %}
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Courses Dashboard. All rights reserved.</p>
    </footer>
</body>

</html>
